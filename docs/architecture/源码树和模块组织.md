# 源码树和模块组织

## 项目结构（实际）

```text
neostock/
├── apps/
│   ├── server/                 # 后端 Hono 应用
│   │   ├── src/
│   │   │   ├── index.ts        # 应用入口点
│   │   │   ├── lib/
│   │   │   │   ├── auth.ts     # Better Auth 配置
│   │   │   │   ├── context.ts  # tRPC 上下文创建
│   │   │   │   └── trpc.ts     # tRPC 实例和中间件
│   │   │   ├── routers/
│   │   │   │   └── index.ts    # 主 tRPC 路由（目前只有健康检查）
│   │   │   └── db/
│   │   │       ├── index.ts    # 数据库连接
│   │   │       └── schema/
│   │   │           └── auth.ts # Better Auth 表结构
│   │   ├── drizzle.config.ts   # Drizzle Kit 配置
│   │   └── package.json
│   └── web/                    # 前端 React 应用
│       ├── src/
│       │   ├── main.tsx        # 应用入口
│       │   ├── components/     # React 组件
│       │   │   ├── ui/         # shadcn/ui 组件
│       │   │   ├── header.tsx  # 导航头部
│       │   │   └── ...         # 其他组件
│       │   ├── routes/         # TanStack Router 路由
│       │   │   ├── __root.tsx  # 根路由组件
│       │   │   ├── index.tsx   # 首页
│       │   │   ├── dashboard.tsx # 仪表板
│       │   │   └── login.tsx   # 登录页
│       │   ├── utils/
│       │   │   └── trpc.ts     # tRPC 客户端配置
│       │   └── index.css       # 全局样式
│       ├── vite.config.ts      # Vite 配置
│       └── package.json
├── web-bundles/                # BMAD 代理配置（不相关）
├── turbo.json                  # Turborepo 配置
├── package.json                # 根包配置
└── README.md
```

## 关键模块及其用途

- **认证系统**: `apps/server/src/lib/auth.ts` - 使用 Better Auth，支持邮箱密码认证
- **API 层**: `apps/server/src/routers/index.ts` - 目前只有健康检查和私有数据示例
- **数据库**: `apps/server/src/db/` - 使用 Drizzle ORM 和 SQLite/Turso
- **前端路由**: `apps/web/src/routes/` - 基于文件的路由系统
- **UI 组件**: `apps/web/src/components/` - shadcn/ui 组件和自定义组件
- **状态管理**: `apps/web/src/utils/trpc.ts` - tRPC + TanStack Query 集成
