# 2. 需求分析 📋

## 功能需求

**FR1**: 系统应支持中国 A 股数据通过 tushare pro 主数据源和免费备用 API 获取，每日下午 5 点自动拉取并存储延时数据，具备主备数据源自动切换能力
**FR2**: 用户可以创建、编辑多种交易策略（技术指标策略、基本面策略、量化算法策略），支持全套技术指标（MA、MACD、RSI、KDJ、布林带、CCI、威廉指标等）
**FR3**: 策略回测引擎基于 1 年历史数据异步处理，生成完整性能报告（夏普比率、最大回撤、年化收益率、胜率、盈亏比等全套指标）
**FR4**: [Phase 2 功能] AI 大语言模型分析提供日内交易、短线和中线建议，基于价格数据、财务报表、新闻舆情、宏观经济数据进行买卖信号、价格预测、风险评估、板块推荐
**FR5**: 移动端友好的数据可视化组件，为个人投资者提供简单易用的股价图表和分析结果展示
**FR6**: 分层用户权限系统，支持免费功能和付费订阅功能，管理用户访问级别
**FR7**: 用户投资组合管理和模拟交易系统，支持策略验证和风险控制

## 非功能需求

**NFR1**: 系统必须支持百人级并发用户，维持现有认证系统安全性，日数据处理能力不少于 4000 只 A 股，为未来万人级扩展保留架构灵活性
**NFR2**: 回测计算采用异步处理，1 年数据回测完成时间不超过 5 分钟
**NFR3**: 数据存储稳定安全，支持移动端访问，系统可用性达到 99.5%
**NFR4**: 付费订阅系统集成，支持不同权限级别的功能访问控制
**NFR5**: 符合个人投资者使用习惯，界面简单易用，学习成本不超过 30 分钟

## 兼容性需求

**CR1**: 必须与现有 Better Auth 认证系统完全兼容，扩展支持付费订阅用户管理
**CR2**: 数据库 schema 扩展支持大量金融时序数据存储，不影响现有用户认证结构
**CR3**: 移动端 UI 必须与现有 shadcn/ui 设计系统保持一致，适配手机屏幕尺寸
**CR4**: API 设计遵循现有 tRPC 模式，支持数据拉取任务的异步处理架构

---
